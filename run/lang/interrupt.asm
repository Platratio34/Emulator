:main
LOAD rIR :interrupt
SYSCALL 0x0001
HALT

:interrupt
// stack: [...pgmPtr,rPM]
// rPM = true; pgmPtr = :interrupt
STACK PUSH r0
STACK PUSH r1
STACK PUSH r2
STACK PUSH r3
STACK PUSH r4
STACK PUSH r5
STACK PUSH r6
STACK PUSH r7
STACK PUSH r8
STACK PUSH r9
STACK PUSH r10
STACK PUSH r11
STACK PUSH r12
STACK PUSH r13
STACK PUSH r14
STACK PUSH r15
SYSCALL 0x0002
STACK POP r15
STACK POP r14
STACK POP r13
STACK POP r12
STACK POP r11
STACK POP r10
STACK POP r9
STACK POP r8
STACK POP r7
STACK POP r6
STACK POP r5
STACK POP r4
STACK POP r3
STACK POP r2
STACK POP r1
STACK POP rPM
STACK POP rPgm
// returns to prevois state